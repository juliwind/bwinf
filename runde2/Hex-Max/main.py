import numpy as np
import math

input_path = 'resources\hexmax0.txt'

# s = subtraction
# a = addition
transformations = {
    "0": {"1": {"a": 0, "s": 4}, "2": {"a": 1, "s": 2}, "3": {"a": 1, "s": 2}, "4": {"a": 1, "s": 3}, "5": {"a": 1, "s": 2},
          "6": {"a": 1, "s": 1}, "7": {"a": 0, "s": 3}, "8": {"a": 1, "s": 0}, "9": {"a": 1, "s": 1}, "a": {"a": 1, "s": 1},
          "b": {"a": 1, "s": 2}, "c": {"a": 0, "s": 2}, "d": {"a": 1, "s": 2}, "e": {"a": 1, "s": 2}, "f": {"a": 1, "s": 3}},
    "1": {"0": {"a": 4, "s": 0}, "2": {"a": 4, "s": 1}, "3": {"a": 3, "s": 0}, "4": {"a": 2, "s": 0}, "5": {"a": 4, "s": 0},
          "6": {"a": 5, "s": 1}, "7": {"a": 1, "s": 0}, "8": {"a": 5, "s": 0}, "9": {"a": 4, "s": 0}, "a": {"a": 4, "s": 0},
          "b": {"a": 4, "s": 1}, "c": {"a": 4, "s": 2}, "d": {"a": 3, "s": 0}, "e": {"a": 5, "s": 2}, "f": {"a": 4, "s": 2}},
    "2": {"0": {"a": 2, "s": 1}, "1": {"a": 1, "s": 4}, "3": {"a": 1, "s": 1}, "4": {"a": 2, "s": 3}, "5": {"a": 2, "s": 2},
          "6": {"a": 2, "s": 1}, "7": {"a": 1, "s": 3}, "8": {"a": 2, "s": 0}, "9": {"a": 2, "s": 1}, "a": {"a": 2, "s": 1},
          "b": {"a": 2, "s": 2}, "c": {"a": 1, "s": 2}, "d": {"a": 1, "s": 1}, "e": {"a": 1, "s": 1}, "f": {"a": 1, "s": 2}},
    "3": {"0": {"a": 2, "s": 1}, "1": {"a": 0, "s": 3}, "2": {"a": 1, "s": 1}, "4": {"a": 1, "s": 2}, "5": {"a": 1, "s": 1},
          "6": {"a": 2, "s": 1}, "7": {"a": 0, "s": 2}, "8": {"a": 2, "s": 0}, "9": {"a": 1, "s": 0}, "a": {"a": 2, "s": 1},
          "b": {"a": 2, "s": 2}, "c": {"a": 2, "s": 3}, "d": {"a": 1, "s": 1}, "e": {"a": 2, "s": 2}, "f": {"a": 2, "s": 3}},
    "4": {"0": {"a": 3, "s": 1}, "1": {"a": 0, "s": 2}, "2": {"a": 3, "s": 2}, "3": {"a": 2, "s": 1}, "5": {"a": 2, "s": 1},
          "6": {"a": 3, "s": 1}, "7": {"a": 1, "s": 2}, "8": {"a": 3, "s": 0}, "9": {"a": 2, "s": 0}, "a": {"a": 2, "s": 0},
          "b": {"a": 2, "s": 1}, "c": {"a": 3, "s": 3}, "d": {"a": 2, "s": 1}, "e": {"a": 3, "s": 2}, "f": {"a": 2, "s": 2}},
    "5": {"0": {"a": 2, "s": 1}, "1": {"a": 1, "s": 4}, "2": {"a": 2, "s": 2}, "3": {"a": 1, "s": 1}, "4": {"a": 1, "s": 2},
          "6": {"a": 1, "s": 0}, "7": {"a": 1, "s": 3}, "8": {"a": 2, "s": 0}, "9": {"a": 1, "s": 0}, "a": {"a": 2, "s": 1},
          "b": {"a": 1, "s": 1}, "c": {"a": 1, "s": 2}, "d": {"a": 2, "s": 2}, "e": {"a": 1, "s": 1}, "f": {"a": 1, "s": 2}},
    "6": {"0": {"a": 1, "s": 1}, "1": {"a": 1, "s": 5}, "2": {"a": 1, "s": 2}, "3": {"a": 1, "s": 2}, "4": {"a": 1, "s": 3},
          "5": {"a": 0, "s": 1}, "7": {"a": 1, "s": 4}, "8": {"a": 1, "s": 0}, "9": {"a": 1, "s": 1}, "a": {"a": 1, "s": 1},
          "b": {"a": 0, "s": 1}, "c": {"a": 0, "s": 2}, "d": {"a": 1, "s": 2}, "e": {"a": 0, "s": 1}, "f": {"a": 0, "s": 2}},
    "7": {"0": {"a": 3, "s": 0}, "1": {"a": 0, "s": 1}, "2": {"a": 3, "s": 1}, "3": {"a": 2, "s": 0}, "4": {"a": 2, "s": 1},
          "5": {"a": 3, "s": 1}, "6": {"a": 4, "s": 1}, "8": {"a": 4, "s": 0}, "9": {"a": 3, "s": 0}, "a": {"a": 3, "s": 0},
          "b": {"a": 4, "s": 2}, "c": {"a": 3, "s": 2}, "d": {"a": 3, "s": 1}, "e": {"a": 4, "s": 2}, "f": {"a": 3, "s": 2}},
    "8": {"0": {"a": 0, "s": 1}, "1": {"a": 0, "s": 5}, "2": {"a": 0, "s": 2}, "3": {"a": 0, "s": 2}, "4": {"a": 0, "s": 3},
          "5": {"a": 0, "s": 2}, "6": {"a": 0, "s": 1}, "7": {"a": 0, "s": 4}, "9": {"a": 0, "s": 1}, "a": {"a": 0, "s": 1},
          "b": {"a": 0, "s": 2}, "c": {"a": 0, "s": 3}, "d": {"a": 0, "s": 2}, "e": {"a": 0, "s": 2}, "f": {"a": 0, "s": 3}},
    "9": {"0": {"a": 1, "s": 1}, "1": {"a": 0, "s": 4}, "2": {"a": 1, "s": 2}, "3": {"a": 0, "s": 1}, "4": {"a": 0, "s": 2},
          "5": {"a": 0, "s": 1}, "6": {"a": 1, "s": 1}, "7": {"a": 0, "s": 3}, "8": {"a": 1, "s": 0}, "a": {"a": 1, "s": 1},
          "b": {"a": 1, "s": 2}, "c": {"a": 1, "s": 3}, "d": {"a": 1, "s": 2}, "e": {"a": 1, "s": 2}, "f": {"a": 1, "s": 3}},
    "a": {"0": {"a": 1, "s": 1}, "1": {"a": 0, "s": 4}, "2": {"a": 1, "s": 2}, "3": {"a": 1, "s": 2}, "4": {"a": 0, "s": 2},
          "5": {"a": 1, "s": 2}, "6": {"a": 1, "s": 1}, "7": {"a": 0, "s": 3}, "8": {"a": 1, "s": 0}, "9": {"a": 1, "s": 1},
          "b": {"a": 1, "s": 2}, "c": {"a": 1, "s": 3}, "d": {"a": 1, "s": 2}, "e": {"a": 1, "s": 2}, "f": {"a": 0, "s": 2}},
    "b": {"0": {"a": 2, "s": 1}, "1": {"a": 1, "s": 4}, "2": {"a": 2, "s": 2}, "3": {"a": 2, "s": 2}, "4": {"a": 1, "s": 2},
          "5": {"a": 1, "s": 1}, "6": {"a": 1, "s": 0}, "7": {"a": 2, "s": 4}, "8": {"a": 2, "s": 0}, "9": {"a": 2, "s": 1},
          "a": {"a": 2, "s": 1}, "c": {"a": 1, "s": 2}, "d": {"a": 1, "s": 1}, "e": {"a": 1, "s": 1}, "f": {"a": 1, "s": 2}},
    "c": {"0": {"a": 2, "s": 0}, "1": {"a": 2, "s": 4}, "2": {"a": 2, "s": 1}, "3": {"a": 3, "s": 2}, "4": {"a": 3, "s": 3},
          "5": {"a": 2, "s": 1}, "6": {"a": 2, "s": 0}, "7": {"a": 2, "s": 3}, "8": {"a": 3, "s": 0}, "9": {"a": 3, "s": 1},
          "a": {"a": 3, "s": 1}, "b": {"a": 2, "s": 1}, "d": {"a": 3, "s": 2}, "e": {"a": 1, "s": 0}, "f": {"a": 1, "s": 1}},
    "d": {"0": {"a": 2, "s": 1}, "1": {"a": 0, "s": 3}, "2": {"a": 1, "s": 1}, "3": {"a": 1, "s": 1}, "4": {"a": 1, "s": 2},
          "5": {"a": 2, "s": 2}, "6": {"a": 2, "s": 1}, "7": {"a": 1, "s": 3}, "8": {"a": 2, "s": 0}, "9": {"a": 2, "s": 1},
          "a": {"a": 2, "s": 1}, "b": {"a": 1, "s": 1}, "c": {"a": 2, "s": 3}, "e": {"a": 2, "s": 2}, "f": {"a": 2, "s": 3}},
    "e": {"0": {"a": 2, "s": 1}, "1": {"a": 2, "s": 5}, "2": {"a": 1, "s": 1}, "3": {"a": 2, "s": 2}, "4": {"a": 2, "s": 3},
          "5": {"a": 1, "s": 1}, "6": {"a": 1, "s": 0}, "7": {"a": 2, "s": 4}, "8": {"a": 2, "s": 0}, "9": {"a": 2, "s": 1},
          "a": {"a": 2, "s": 1}, "b": {"a": 1, "s": 1}, "c": {"a": 0, "s": 1}, "d": {"a": 2, "s": 2}, "f": {"a": 0, "s": 1}},
    "f": {"0": {"a": 3, "s": 1}, "1": {"a": 2, "s": 4}, "2": {"a": 2, "s": 1}, "3": {"a": 3, "s": 2}, "4": {"a": 2, "s": 2},
          "5": {"a": 2, "s": 1}, "6": {"a": 2, "s": 0}, "7": {"a": 2, "s": 3}, "8": {"a": 3, "s": 0}, "9": {"a": 3, "s": 1},
          "a": {"a": 2, "s": 0}, "b": {"a": 2, "s": 1}, "c": {"a": 1, "s": 1}, "d": {"a": 3, "s": 2}, "e": {"a": 1, "s": 0}}
}


def readFile():
    input_hex = []
    with open(input_path, 'r') as file:
        for letter in file.readline():
            input_hex.append(letter.rstrip())
        max_shifts = file.readline().rstrip()
        input_hex = [x for x in input_hex if x != '']
    for i in range(len(input_hex)):
        input_hex[i] = input_hex[i].lower()
    input_digits = []
    for i in input_hex:
        input_digits = makeObject(i, input_digits)
    return(input_digits, max_shifts)


def makeObject(x, array):
    if x == "0":
        array.append(Digit(0, 1, 1, 1, 0, 1, 1, 1))
    if x == "1":
        array.append(Digit(1, 0, 0, 1, 0, 0, 1, 0))
    if x == "2":
        array.append(Digit(2, 1, 0, 1, 1, 1, 0, 1))
    if x == "3":
        array.append(Digit(3, 1, 0, 1, 1, 0, 1, 1))
    if x == "4":
        array.append(Digit(4, 0, 1, 1, 1, 0, 1, 0))
    if x == "5":
        array.append(Digit(5, 1, 1, 0, 1, 0, 1, 1))
    if x == "6":
        array.append(Digit(6, 1, 1, 0, 1, 1, 1, 1))
    if x == "7":
        array.append(Digit(7, 1, 0, 1, 0, 0, 1, 0))
    if x == "8":
        array.append(Digit(8, 1, 1, 1, 1, 1, 1, 1))
    if x == "9":
        array.append(Digit(9, 1, 1, 1, 1, 0, 1, 1))
    if x == "a":
        array.append(Digit("a", 1, 1, 1, 1, 1, 1, 0))
    if x == "b":
        array.append(Digit("b", 0, 1, 0, 1, 1, 1, 1))
    if x == "c":
        array.append(Digit("c", 1, 1, 0, 0, 1, 0, 1))
    if x == "d":
        array.append(Digit("d", 0, 0, 1, 1, 1, 1, 1))
    if x == "e":
        array.append(Digit("e", 1, 1, 0, 1, 1, 0, 1))
    if x == "f":
        array.append(Digit("f", 1, 1, 0, 1, 1, 0, 0))
    return array


class Digit():
    def __init__(self, number, segment1, segment2, segment3, segment4, segment5, segment6, segment7):
        self.number = number
        self.segment1 = segment1
        self.segment2 = segment2
        self.segment3 = segment3
        self.segment4 = segment4
        self.segment5 = segment5
        self.segment6 = segment6
        self.segment7 = segment7

    def __repr__(self):
        return "Number: " + str(self.number) + ", Segment1: " + str(self.segment1) + ", Segment2: " + str(self.segment2) + ", Segment3: " + str(self.segment3) + ", Segment4: " + str(self.segment4) + ", Segment5: " + str(self.segment5) + ", Segment6: " + str(self.segment6) + ", Segment7: " + str(self.segment7)


hex, max_shifts = readFile()
print("hex", hex, "max shifts", max_shifts)
